<!DOCTYPE html>
<html lang="es">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Una decisiรณn de 195 mil millones para cumplir ยฟun capricho?</title>
ย ย <script src="https://cdn.tailwindcss.com"></script>
ย ย <style>
ย ย ย ย .slider {
ย ย ย ย ย ย -webkit-appearance: none;
ย ย ย ย ย ย appearance: none;
ย ย ย ย ย ย height: 12px;
ย ย ย ย ย ย border-radius: 6px;
ย ย ย ย ย ย background: #e5e7eb;
ย ย ย ย ย ย outline: none;
ย ย ย ย ย ย transition: all 0.3s ease;
ย ย ย ย }
ย ย ย ย .slider::-webkit-slider-thumb {
ย ย ย ย ย ย -webkit-appearance: none;
ย ย ย ย ย ย appearance: none;
ย ย ย ย ย ย width: 28px;
ย ย ย ย ย ย height: 28px;
ย ย ย ย ย ย border-radius: 50%;
ย ย ย ย ย ย background: #7010A6;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย box-shadow: 0 3px 6px rgba(112, 16, 166, 0.3);
ย ย ย ย ย ย transition: all 0.2s ease;
ย ย ย ย }
ย ย ย ย .slider::-webkit-slider-thumb:hover {
ย ย ย ย ย ย transform: scale(1.1);
ย ย ย ย ย ย box-shadow: 0 4px 8px rgba(112, 16, 166, 0.4);
ย ย ย ย }
ย ย ย ย .slider::-moz-range-thumb {
ย ย ย ย ย ย width: 28px;
ย ย ย ย ย ย height: 28px;
ย ย ย ย ย ย border-radius: 50%;
ย ย ย ย ย ย background: #7010A6;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย box-shadow: 0 3px 6px rgba(112, 16, 166, 0.3);
ย ย ย ย ย ย border: none;
ย ย ย ย }
ย ย ย ย .slider:hover {
ย ย ย ย ย ย opacity: 0.9;
ย ย ย ย }
ย ย ย ย .loading-spinner {
ย ย ย ย ย ย border: 3px solid #f3f3f3;
ย ย ย ย ย ย border-top: 3px solid #7010A6;
ย ย ย ย ย ย border-radius: 50%;
ย ย ย ย ย ย width: 20px;
ย ย ย ย ย ย height: 20px;
ย ย ย ย ย ย animation: spin 1s linear infinite;
ย ย ย ย ย ย display: inline-block;
ย ย ย ย }
ย ย ย ย @keyframes spin {
ย ย ย ย ย ย 0% { transform: rotate(0deg); }
ย ย ย ย ย ย 100% { transform: rotate(360deg); }
ย ย ย ย }
ย ย </style>

ย ย ย ย <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
ย ย new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
ย ย j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
ย ย 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
ย ย })(window,document,'script','dataLayer','GTM-WG7JLVDS');</script>
ย ย ย ยย
</head>
<body>
ย ย ย ย <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WG7JLVDS"
ย ย height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
ย ย ยย
ย ย <div class="min-h-screen bg-gradient-to-br from-purple-50 to-yellow-50">
ย ย ย ย <div class="max-w-7xl mx-auto px-4 py-8">
ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย <header class="text-center mb-12">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="max-w-4xl mx-auto mb-8">
ย ย ย ย ย ย ย ย ย ย <img src="HeaderMaryplaya.png" alt="Header Mar y Playa Medellรญn"ย
ย ย ย ย ย ย ย ย ย ย ย ย ยclass="w-full rounded-xl shadow-lg">
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย <h1 class="text-2xl md:text-4xl font-bold mb-8" style="color: #7010A6;">
ย ย ย ย ย ย ย ย ย ย ยฟ195 mil millones en "mar" mientras Medellรญn se ahoga en problemas reales?
ย ย ย ย ย ย ย ย </h1>
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="max-w-4xl mx-auto space-y-6">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="bg-white rounded-xl p-6 shadow-lg" style="background: rgba(112, 16, 166, 0.02);">
ย ย ย ย ย ย ย ย ย ย ย ย <h3 class="text-xl font-bold mb-4" style="color: #7010A6;">Mientras el Alcalde sueรฑa con playas artificiales, Medellรญn enfrenta:</h3>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="grid md:grid-cols-3 gap-4 text-sm">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center p-4 bg-white rounded-lg shadow-sm">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-2xl font-bold" style="color: #7010A6;">313,257</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-gray-600">personas en pobreza multidimensional</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center p-4 bg-white rounded-lg shadow-sm">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-2xl font-bold" style="color: #7010A6;">221,000</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-gray-600">personas con inseguridad alimentaria severa</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center p-4 bg-white rounded-lg shadow-sm">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-2xl font-bold" style="color: #7010A6;">128,000</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-gray-600">personas viviendo en hacinamiento</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="bg-white rounded-xl p-6 shadow-lg" style="background: rgba(252, 215, 0, 0.05);">
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-lg font-semibold mb-2" style="color: #7010A6;">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยฟEs el mar una prioridad en Medellรญn cuando hay otras necesidades sin resolver?
ย ย ย ย ย ย ย ย ย ย ย ย </p>
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-gray-600">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย Esta respuesta parece mรกs un capricho personal que una soluciรณn a lo que Medellรญn realmente necesita.
ย ย ย ย ย ย ย ย ย ย ย ย </p>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="bg-white rounded-xl p-6 shadow-lg" style="background: rgba(112, 16, 166, 0.02);">
ย ย ย ย ย ย ย ย ย ย ย ย <h3 class="text-xl font-bold mb-6" style="color: #7010A6;">Con esos 195 mil millones, en lugar de Mar y Playa, podrรญamos:</h3>
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย <div class="grid md:grid-cols-2 gap-4">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center p-6 bg-white rounded-lg shadow-sm" style="background: rgba(252, 215, 0, 0.08);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-4xl mb-3">๐</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-2xl font-bold text-gray-800 mb-2">650 casas</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-sm text-gray-600 mb-2">de 300 millones cada una</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-base font-semibold" style="color: #7010A6;">1 de cada 10 familias de Belรฉn</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center p-6 bg-white rounded-lg shadow-sm" style="background: rgba(112, 16, 166, 0.08);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-4xl mb-3">๐ซ</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-2xl font-bold text-gray-800 mb-2">5 mega colegios</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-sm text-gray-600 mb-2">para atender mรกs de 8000 estudiantes</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-base font-semibold" style="color: #7010A6;">y asegurar la cobertura con criterios de calidad</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center p-6 bg-white rounded-lg shadow-sm" style="background: rgba(252, 215, 0, 0.08);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-4xl mb-3">๐๏ธ</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-2xl font-bold text-gray-800 mb-2">6,845 metros</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-sm text-gray-600 mb-2">obras de estabilizaciรณn</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-base font-semibold" style="color: #7010A6;">para prevenir accidentes mortales</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center p-6 bg-white rounded-lg shadow-sm" style="background: rgba(112, 16, 166, 0.08);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-4xl mb-3">๐</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-2xl font-bold text-gray-800 mb-2">32,500 semestres</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-sm text-gray-600 mb-2">universitarios</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-base font-semibold" style="color: #7010A6;">todos los jรณvenes de Popular y Santa Cruz</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="rounded-xl p-6 text-white shadow-lg" style="background: linear-gradient(135deg, #7010A6 0%, #8B2CA3 100%);">
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-lg font-semibold text-center mb-2">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย El "mar" es el capricho de uno. Las necesidades son de todos.
ย ย ย ย ย ย ย ย ย ย ย ย </p>
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-xl font-bold text-center" style="color: #FCD700;">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย Si tรบ fueras alcalde que priorizarรญas para Medellรญn, ยฟcaprichos o necesidades?
ย ย ย ย ย ย ย ย ย ย ย ย </p>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </header>

ย ย ย ย ย ย ย ย ย ย ย ย <div class="max-w-4xl mx-auto mb-12">
ย ย ย ย ย ย ย ย <div class="bg-white rounded-xl shadow-lg" style="background: rgba(112, 16, 166, 0.02);">
ย ย ย ย ย ย ย ย ย ย <div class="text-center p-6 rounded-xl" style="background: linear-gradient(135deg, #7010A6 0%, #8B2CA3 100%); border-radius: 0.75rem 0.75rem 0 0;">
ย ย ย ย ย ย ย ย ย ย ย ย <h2 class="text-2xl font-bold text-white mb-2">Es hora de que Medellรญn realmente decida</h2>
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-gray-100">Mueve las barras para mostrar cuรกles son las prioridades de Medellรญn</p>
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-sm font-semibold mt-2" style="color: #FCD700;">๐ก Tip: Las barras se mueven en incrementos de $1,000 millones</p>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย <div class="p-6">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="grid lg:grid-cols-3 gap-8">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="lg:col-span-2">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="grid md:grid-cols-2 gap-4" id="sliders-container">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="lg:col-span-1">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="sticky top-4 bg-white rounded-xl p-6 text-center shadow-md" style="background: rgba(252, 215, 0, 0.05);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <h3 class="text-lg font-bold mb-4" style="color: #7010A6;">Presupuesto por distribuir</h3>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="contador" class="text-4xl font-bold mb-2" style="color: #7010A6;">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย $195,000
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-lg text-gray-700 mb-4">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย millones de pesos
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="estado-texto" class="text-sm text-gray-600 mb-4">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย Distribuye el presupuesto completo
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="barra-progreso" class="h-4 rounded-full transition-all duration-300"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยstyle="width: 0%; background: linear-gradient(to right, #7010A6, #FCD700);"></div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="mensaje-completado" class="hidden">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-green-600 font-bold text-lg mb-3">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย โ ยกPresupuesto redistribuido!
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onclick="scrollToGrafico()" class="text-white font-bold py-3 px-6 rounded-lg transition-all shadow-md hover:shadow-lg"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย style="background: linear-gradient(135deg, #7010A6 0%, #8B2CA3 100%);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย Ver mi propuesta ciudadana โ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย <div id="grafico-container" class="max-w-4xl mx-auto mb-12 hidden">
ย ย ย ย ย ย ย ย <div class="bg-white rounded-xl shadow-lg" style="background: rgba(252, 215, 0, 0.02);">
ย ย ย ย ย ย ย ย ย ย <div class="p-6 rounded-xl" style="background: rgba(252, 215, 0, 0.9); border-radius: 0.75rem 0.75rem 0 0;">
ย ย ย ย ย ย ย ย ย ย ย ย <h3 class="text-2xl font-bold text-center mb-2" style="color: #7010A6;">Si yo fuera Alcalde, NO gastarรญa en caprichos</h3>
ย ย ย ย ย ย ย ย ย ย ย ย <h3 class="text-2xl font-bold text-center mb-2" style="color: #7010A6;">Invertirรญa 195 mil millones en:</h3>
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-gray-700 text-center">Mi propuesta responde a las necesidades que vivo</p>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="p-6">
ย ย ย ย ย ย ย ย ย ย ย ย <div id="barras-container" class="space-y-4 mb-8">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onclick="generarImagen()" class="text-white font-bold py-3 px-8 rounded-lg transition-all shadow-md hover:shadow-lg"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย style="background: linear-gradient(135deg, #7010A6 0%, #8B2CA3 100%);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ๐ธ Generar imagen para compartir
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย <canvas id="canvas" style="display: none;"></canvas>

ย ย ย ย ย ย ย ย ย ย ย ย <div id="compartir-container" class="max-w-4xl mx-auto mb-12 hidden">
ย ย ย ย ย ย ย ย <div class="bg-white rounded-xl shadow-lg" style="background: rgba(112, 16, 166, 0.02);">
ย ย ย ย ย ย ย ย ย ย <div class="p-6 rounded-xl" style="background: linear-gradient(135deg, #7010A6 0%, #8B2CA3 100%); border-radius: 0.75rem 0.75rem 0 0;">
ย ย ย ย ย ย ย ย ย ย ย ย <h3 class="text-2xl font-bold text-white text-center">Comparte tu propuesta</h3>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="p-6">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="mb-6">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <img id="imagen-preview" alt="Mi propuesta" class="w-full rounded-lg shadow-lg" />
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="flex flex-wrap gap-4 justify-center">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onclick="descargarImagen()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-md hover:shadow-lg">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย โฌ๏ธ Descargar
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onclick="compartirEnRedes('twitter')" class="bg-blue-400 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-md hover:shadow-lg">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ๐ฆ Xย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onclick="compartirEnRedes('facebook')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-md hover:shadow-lg">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ๐ Facebook
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button onclick="compartirEnRedes('whatsapp')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-md hover:shadow-lg">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ๐ฌ WhatsApp
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย <div id="formulario-container" class="max-w-4xl mx-auto mb-12 hidden">
ย ย ย ย ย ย ย ย <div class="bg-white rounded-xl shadow-lg" style="background: rgba(252, 215, 0, 0.02);">
ย ย ย ย ย ย ย ย ย ย <div class="p-6 rounded-xl" style="background: rgba(252, 215, 0, 0.9); border-radius: 0.75rem 0.75rem 0 0;">
ย ย ย ย ย ย ย ย ย ย ย ย <h3 class="text-2xl font-bold text-center mb-2" style="color: #7010A6;">Tu voz importa</h3>
ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-gray-700 text-center">รnete a la Medellรญn que tiene clara sus prioridades</p>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย <form id="formulario-contacto" class="p-6">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="rounded-xl p-6 mb-6 bg-white shadow-sm" style="background: rgba(112, 16, 166, 0.05);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <h4 class="font-bold mb-4" style="color: #7010A6;">Datos de contacto (opcional)</h4>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-sm text-gray-600 mb-4">Si deseas recibir actualizaciones sobre esta iniciativa de control polรญtico</p>
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="grid md:grid-cols-2 gap-4">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="text" id="nombre" name="nombre"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยclass="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:border-transparent"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยstyle="focus:ring-color: #7010A6;"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยplaceholder="Tu nombre (opcional)">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Correo electrรณnico</label>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="email" id="email" name="email"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยclass="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:border-transparent"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยstyle="focus:ring-color: #7010A6;"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยplaceholder="tu@email.com (opcional)">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="whatsapp" class="block text-sm font-medium text-gray-700 mb-1">WhatsApp</label>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="tel" id="whatsapp" name="whatsapp"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยclass="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:border-transparent"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยstyle="focus:ring-color: #7010A6;"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยplaceholder="300 123 4567 (opcional)">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="flex items-center">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="checkbox" id="autorizo" name="autorizo" class="mr-2" style="accent-color: #7010A6;">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="autorizo" class="text-sm text-gray-700">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย Autorizo el uso de mis datos para esta iniciativa
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </label>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="rounded-xl p-6 mb-6 bg-white shadow-sm" style="background: rgba(252, 215, 0, 0.08);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <h4 class="font-bold mb-4" style="color: #7010A6;">Comparte tus ideas</h4>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-sm text-gray-600 mb-4">ยฟQuรฉ otras propuestas tienes para mejorar Medellรญn? (mรกximo 200 palabras)</p>
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <textarea id="ideas" name="ideas" rows="5" maxlength="1000"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:border-transparent"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย style="focus:ring-color: #FCD700;"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย placeholder="Cuรฉntanos tus ideas para un mejor uso de los recursos pรบblicos..."></textarea>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-right text-sm text-gray-500 mt-1">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span id="contador-caracteres">0</span>/1000 caracteres
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-center">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button type="submit" id="btn-enviar"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย class="text-white font-bold py-3 px-8 rounded-lg transition-all shadow-md hover:shadow-lg"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย style="background: linear-gradient(135deg, #7010A6 0%, #8B2CA3 100%);">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย Enviar mi propuesta ciudadana
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="mensaje-enviando" class="hidden mt-4">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="loading-spinner mx-auto"></div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <p class="text-sm text-gray-600 mt-2">Enviando...</p>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="mensaje-exito" class="hidden mt-4 p-4 bg-green-50 border border-green-400 text-green-700 rounded-lg">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย โ ยกGracias por participar! Tu voz ha sido registrada.
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="mensaje-error" class="hidden mt-4 p-4 bg-red-50 border border-red-400 text-red-700 rounded-lg">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย โ Hubo un error. Por favor intenta de nuevo.
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </form>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย <footer class="text-center py-8 text-gray-600 max-w-4xl mx-auto">
ย ย ย ย ย ย ย ย <div class="border-t pt-6" style="border-color: rgba(112, 16, 166, 0.2);">
ย ย ย ย ย ย ย ย ย ย <p class="mb-2 font-semibold" style="color: #7010A6;">Medellรญn reflexiona sobre sus necesidades</p>
ย ย ย ย ย ย ย ย ย ย <p class="text-sm">ยฟQuรฉ es lo รบnico que le hace falta a Medellรญn?<br>
ย ย ย ย ย ย ย ย ย ย Por mรกs derechos y menos caprichos; control polรญtico ciudadano.</p>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </footer>
ย ย ย ย </div>
ย ย </div>

ย ย <script>
ย ย ย ย // Modificaciones necesarias en el JavaScript del frontend

ย ย ย ย // 1. CAMBIAR la lรณgica de envรญo de datos
ย ย ย ย let datosBasicosEnviados = false; // Solo para la distribuciรณn inicial
ย ย ย ย let sessionId = Date.now() + '_' + Math.random().toString(36).substr(2, 9); // ID รบnico de sesiรณn
ย ย ย ยย
ย ย ย ย // 2. FUNCIรN PARA ENVรO INICIAL (solo distribuciรณn)
ย ย ย ย async function enviarDistribucionInicial() {
ย ย ย ย ย ย if (datosBasicosEnviados) {
ย ย ย ย ย ย ย ย console.log('Distribuciรณn ya enviada');
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ยย
ย ย ย ย ย ย const datosDistribucion = {
ย ย ย ย ย ย ย ย action: 'guardar_respuesta',
ย ย ย ย ย ย ย ย timestamp: new Date().toISOString(),
ย ย ย ย ย ย ย ย session_id: sessionId,
ย ย ย ย ย ย ย ย distribucion: distribucion,
ย ย ย ย ย ย ย ย imagen_generada: 'NO',
ย ย ย ย ย ย ย ย imagen_compartida: 'NO',
ย ย ย ย ย ย ย ย red_compartida: '',
ย ย ย ย ย ย ย ย formulario_completado: 'NO',
ย ย ย ย ย ย ย ย nombre: '',
ย ย ย ย ย ย ย ย email: '',
ย ย ย ย ย ย ย ย whatsapp: '',
ย ย ย ย ย ย ย ย autorizo_contacto: 'NO',
ย ย ย ย ย ย ย ย ideas: '',
ย ย ย ย ย ย ย ย dispositivo: screen.width < 768 ? 'Mรณvil' : 'Desktop',
ย ย ย ย ย ย ย ย navegador: detectarNavegador(),
ย ย ย ย ย ย ย ย tiempo_sesion_segundos: Math.floor((Date.now() - tiempoInicio) / 1000)
ย ย ย ย ย ย };
ย ย ย ย ย ยย
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย console.log('Enviando distribuciรณn inicial...');
ย ย ย ย ย ย ย ย datosBasicosEnviados = true;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย const response = await fetch(BACKEND_URL, {
ย ย ย ย ย ย ย ย ย ย method: 'POST',
ย ย ย ย ย ย ย ย ย ย headers: {
ย ย ย ย ย ย ย ย ย ย ย ย 'Content-Type': 'application/json',
ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(datosDistribucion)
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย if (response.ok) {
ย ย ย ย ย ย ย ย ย ย const data = await response.json();
ย ย ย ย ย ย ย ย ย ย console.log('Distribuciรณn enviada:', data);
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย console.error('Error enviando distribuciรณn:', response.status);
ย ย ย ย ย ย ย ย ย ย datosBasicosEnviados = false;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error:', error);
ย ย ย ย ย ย ย ย datosBasicosEnviados = false;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // 3. FUNCIรN PARA ACTUALIZAR CUANDO SE GENERA IMAGEN
ย ย ย ย async function actualizarConImagen() {
ย ย ย ย ย ย const datosImagen = {
ย ย ย ย ย ย ย ย action: 'actualizar_respuesta', // Nueva acciรณn
ย ย ย ย ย ย ย ย session_id: sessionId,
ย ย ย ย ย ย ย ย imagen_generada: 'SI',
ย ย ย ย ย ย ย ย timestamp_imagen: new Date().toISOString()
ย ย ย ย ย ย };
ย ย ย ย ย ยย
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย await fetch(BACKEND_URL, {
ย ย ย ย ย ย ย ย ย ย method: 'POST',
ย ย ย ย ย ย ย ย ย ย headers: {
ย ย ย ย ย ย ย ย ย ย ย ย 'Content-Type': 'application/json',
ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(datosImagen)
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย console.log('Imagen actualizada');
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error actualizando imagen:', error);
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // 4. FUNCIรN PARA ACTUALIZAR CUANDO SE COMPARTE
ย ย ย ย async function actualizarConCompartir(red) {
ย ย ย ย ย ย const datosCompartir = {
ย ย ย ย ย ย ย ย action: 'actualizar_respuesta',
ย ย ย ย ย ย ย ย session_id: sessionId,
ย ย ย ย ย ย ย ย imagen_compartida: 'SI',
ย ย ย ย ย ย ย ย red_compartida: red,
ย ย ย ย ย ย ย ย timestamp_compartir: new Date().toISOString()
ย ย ย ย ย ย };
ย ย ย ย ย ยย
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย await fetch(BACKEND_URL, {
ย ย ย ย ย ย ย ย ย ย method: 'POST',
ย ย ย ย ย ย ย ย ย ย headers: {
ย ย ย ย ย ย ย ย ย ย ย ย 'Content-Type': 'application/json',
ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(datosCompartir)
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย console.log('Compartir actualizado');
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error actualizando compartir:', error);
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // 5. FUNCIรN PARA DATOS COMPLETOS DEL FORMULARIO
ย ย ย ย async function enviarFormularioCompleto() {
ย ย ย ย ย ย const datosCompletos = {
ย ย ย ย ย ย ย ย action: 'actualizar_respuesta',
ย ย ย ย ย ย ย ย session_id: sessionId,
ย ย ย ย ย ย ย ย formulario_completado: 'SI',
ย ย ย ย ย ย ย ย nombre: document.getElementById('nombre')?.value || '',
ย ย ย ย ย ย ย ย email: document.getElementById('email')?.value || '',
ย ย ย ย ย ย ย ย whatsapp: document.getElementById('whatsapp')?.value || '',
ย ย ย ย ย ย ย ย autorizo_contacto: document.getElementById('autorizo')?.checked ? 'SI' : 'NO',
ย ย ย ย ย ย ย ย ideas: document.getElementById('ideas')?.value || '',
ย ย ย ย ย ย ย ย timestamp_formulario: new Date().toISOString(),
ย ย ย ย ย ย ย ย tiempo_sesion_final: Math.floor((Date.now() - tiempoInicio) / 1000)
ย ย ย ย ย ย };
ย ย ย ย ย ยย
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย const response = await fetch(BACKEND_URL, {
ย ย ย ย ย ย ย ย ย ย method: 'POST',
ย ย ย ย ย ย ย ย ย ย headers: {
ย ย ย ย ย ย ย ย ย ย ย ย 'Content-Type': 'application/json',
ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(datosCompletos)
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย if (response.ok) {
ย ย ย ย ย ย ย ย ย ย console.log('Formulario enviado exitosamente');
ย ย ย ย ย ย ย ย ย ย return true;
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย console.error('Error enviando formulario');
ย ย ย ย ย ย ย ย ย ย return false;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error:', error);
ย ย ย ย ย ย ย ย return false;
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย // Configuraciรณn
ย ย ย ย const PRESUPUESTO_TOTAL = 195000;
ย ย ย ย const BACKEND_URL = '/.netlify/functions/googleProxy';
ย ย ย ยย
ย ย ย ย let imageUrl = '';
ย ย ย ย const tiempoInicio = Date.now();
ย ย ย ยย
ย ย ย ย const categorias = [
ย ย ย ย ย ย { id: 'salud', nombre: 'Salud', emoji: '๐ฅ', color: '#7010A6' },
ย ย ย ย ย ย { id: 'educacion', nombre: 'Educaciรณn', emoji: '๐', color: '#FCD700' },
ย ย ย ย ย ย { id: 'seguridad', nombre: 'Seguridad', emoji: '๐ฎ', color: '#8B2CA3' },
ย ย ย ย ย ย { id: 'vivienda', nombre: 'Vivienda', emoji: '๐', color: '#E6C200' },
ย ย ย ย ย ย { id: 'movilidad', nombre: 'Movilidad', emoji: '๐', color: '#7010A6' },
ย ย ย ย ย ย { id: 'servicios', nombre: 'Servicios Pรบblicos', emoji: '๐ฐ', color: '#FCD700' },
ย ย ย ย ย ย { id: 'deporte', nombre: 'Deporte y Recreaciรณn', emoji: 'โฝ', color: '#8B2CA3' },
ย ย ย ย ย ย { id: 'cultura', nombre: 'Cultura', emoji: '๐ญ', color: '#E6C200' }
ย ย ย ย ];

ย ย ย ย let distribucion = {};
ย ย ย ย categorias.forEach(cat => {
ย ย ย ย ย ย distribucion[cat.id] = 0;
ย ย ย ย });

ย ย ย ย function formatearMiles(valor) {
ย ย ย ย ย ย return new Intl.NumberFormat('es-CO').format(valor);
ย ย ย ย }

ย ย ย ย function scrollToGrafico() {
ย ย ย ย ย ย document.getElementById('grafico-container').scrollIntoView({ behavior: 'smooth' });
ย ย ย ย }

ย ย ย ย // 6. MODIFICAR las funciones existentes

ย ย ย ย // En actualizarContador(), cambiar:
ย ย ย ย function actualizarContador() {
ย ย ย ย ย ย const totalAsignado = Object.values(distribucion).reduce((sum, val) => sum + val, 0);
ย ย ย ย ย ย const restante = PRESUPUESTO_TOTAL - totalAsignado;
ย ย ย ย ย ย const porcentajeAsignado = (totalAsignado / PRESUPUESTO_TOTAL) * 100;
ย ย ย ย ย ยย
ย ย ย ย ย ย const contador = document.getElementById('contador');
ย ย ย ย ย ย const estadoTexto = document.getElementById('estado-texto');
ย ย ย ย ย ย const barraProgreso = document.getElementById('barra-progreso');
ย ย ย ย ย ย const mensajeCompletado = document.getElementById('mensaje-completado');
ย ย ย ย ย ย const graficoContainer = document.getElementById('grafico-container');
ย ย ย ย ย ย const compartirContainer = document.getElementById('compartir-container');
ย ย ย ย ย ย const formularioContainer = document.getElementById('formulario-container');
ย ย ย ย ย ยย
ย ย ย ย ย ย contador.textContent = `$${formatearMiles(Math.abs(restante))}`;
ย ย ย ย ย ย barraProgreso.style.width = `${porcentajeAsignado}%`;
ย ย ย ย ย ยย
ย ย ย ย ย ย if (restante === 0) {
ย ย ย ย ย ย ย ย contador.className = 'text-4xl font-bold text-green-600 mb-2';
ย ย ย ย ย ย ย ย estadoTexto.textContent = 'ยกDistribuciรณn completa!';
ย ย ย ย ย ย ย ย estadoTexto.className = 'text-sm text-green-600 mb-4 font-bold';
ย ย ย ย ย ย ย ย mensajeCompletado.classList.remove('hidden');
ย ย ย ย ย ย ย ย graficoContainer.classList.remove('hidden');
ย ย ย ย ย ย ย ย formularioContainer.classList.remove('hidden');
ย ย ย ย ย ย ย ย compartirContainer.classList.add('hidden');
ย ย ย ย ย ย ย ย actualizarGrafico();
ย ย ย ย ย ย ย ย enviarDistribucionInicial(); // CAMBIAR esta lรญnea
ย ย ย ย ย ย } else if (restante > 0) {
ย ย ย ย ย ย ย ย contador.className = 'text-4xl font-bold mb-2';
ย ย ย ย ย ย ย ย contador.style.color = '#7010A6';
ย ย ย ย ย ย ย ย estadoTexto.textContent = `Faltan ${formatearMiles(restante)} millones por asignar`;
ย ย ย ย ย ย ย ย estadoTexto.className = 'text-sm text-gray-600 mb-4';
ย ย ย ย ย ย ย ย mensajeCompletado.classList.add('hidden');
ย ย ย ย ย ย ย ย graficoContainer.classList.add('hidden');
ย ย ย ย ย ย ย ย compartirContainer.classList.add('hidden');
ย ย ย ย ย ย ย ย formularioContainer.classList.add('hidden');
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย contador.className = 'text-4xl font-bold text-red-600 mb-2';
ย ย ย ย ย ย ย ย estadoTexto.textContent = `Te excediste por ${formatearMiles(Math.abs(restante))} millones`;
ย ย ย ย ย ย ย ย estadoTexto.className = 'text-sm text-red-600 mb-4';
ย ย ย ย ย ย ย ย mensajeCompletado.classList.add('hidden');
ย ย ย ย ย ย ย ย graficoContainer.classList.add('hidden');
ย ย ย ย ย ย ย ย compartirContainer.classList.add('hidden');
ย ย ย ย ย ย ย ย formularioContainer.classList.add('hidden');
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function handleSliderChange(categoria, valor) {
ย ย ย ย ย ย const nuevoValor = parseInt(valor);
ย ย ย ย ย ย const otrosValores = Object.entries(distribucion)
ย ย ย ย ย ย ย ย .filter(([cat]) => cat !== categoria)
ย ย ย ย ย ย ย ย .reduce((sum, [, val]) => sum + val, 0);
ย ย ย ย ย ยย
ย ย ย ย ย ย if (otrosValores + nuevoValor <= PRESUPUESTO_TOTAL) {
ย ย ย ย ย ย ย ย distribucion[categoria] = nuevoValor;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย document.getElementById(`valor-${categoria}`).textContent = `$${formatearMiles(nuevoValor)}M`;
ย ย ย ย ย ย ย ย document.getElementById(`porcentaje-${categoria}`).textContent =ย
ย ย ย ย ย ย ย ย ย ย `${((nuevoValor / PRESUPUESTO_TOTAL) * 100).toFixed(1)}%`;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย const slider = document.getElementById(`slider-${categoria}`);
ย ย ย ย ย ย ย ย const porcentaje = (nuevoValor / PRESUPUESTO_TOTAL) * 100;
ย ย ย ย ย ย ย ย const cat = categorias.find(c => c.id === categoria);
ย ย ย ย ย ย ย ย slider.style.background = `linear-gradient(to right, ${cat.color} 0%, ${cat.color} ${porcentaje}%, #e5e7eb ${porcentaje}%, #e5e7eb 100%)`;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย actualizarContador();
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย document.getElementById(`slider-${categoria}`).value = distribucion[categoria];
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function actualizarGrafico() {
ย ย ย ย ย ย const container = document.getElementById('barras-container');
ย ย ย ย ย ย container.innerHTML = '';
ย ย ย ย ย ยย
ย ย ย ย ย ย const categoriasOrdenadas = [...categorias].sort((a, b) =>ย
ย ย ย ย ย ย ย ย distribucion[b.id] - distribucion[a.id]
ย ย ย ย ย ย ).filter(cat => distribucion[cat.id] > 0);
ย ย ย ย ย ยย
ย ย ย ย ย ย categoriasOrdenadas.forEach(cat => {
ย ย ย ย ย ย ย ย const valor = distribucion[cat.id];
ย ย ย ย ย ย ย ย const porcentaje = (valor / PRESUPUESTO_TOTAL) * 100;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย const barra = document.createElement('div');
ย ย ย ย ย ย ย ย barra.className = 'flex items-center gap-3';
ย ย ย ย ย ย ย ย barra.innerHTML = `
ย ย ย ย ย ย ย ย ย ย <div class="w-36 text-right flex items-center justify-end gap-2">
ย ย ย ย ย ย ย ย ย ย ย ย <span class="text-2xl">${cat.emoji}</span>
ย ย ย ย ย ย ย ย ย ย ย ย <span class="text-sm font-semibold">${cat.nombre}</span>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="flex-1">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="bg-gray-200 rounded-full h-10 relative overflow-hidden">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="h-10 rounded-full flex items-center justify-end pr-3 transition-all duration-500"ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยstyle="width: ${porcentaje}%; background-color: ${cat.color}">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="text-sm font-bold text-white">${porcentaje.toFixed(1)}%</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="w-28 text-right font-bold" style="color: #7010A6;">
ย ย ย ย ย ย ย ย ย ย ย ย ${formatearMiles(valor)}M
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย `;
ย ย ย ย ย ย ย ย container.appendChild(barra);
ย ย ย ย ย ย });
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // En generarImagen(), agregar:
ย ย ย ย function generarImagen() {
ย ย ย ย ย ย const canvas = document.getElementById('canvas');
ย ย ย ย ย ย const ctx = canvas.getContext('2d');
ย ย ย ย ย ยย
ย ย ย ย ย ย canvas.width = 1200;
ย ย ย ย ย ย canvas.height = 630;
ย ย ย ย ย ยย
ย ย ย ย ย ย ctx.fillStyle = '#FFFFFF';
ย ย ย ย ย ย ctx.fillRect(0, 0, 1200, 630);
ย ย ย ย ย ยย
ย ย ย ย ย ย ctx.fillStyle = '#7010A6';
ย ย ย ย ย ย ctx.fillRect(0, 0, 1200, 120);
ย ย ย ย ย ยย
ย ย ย ย ย ย ctx.fillStyle = '#FFFFFF';
ย ย ย ย ย ย ctx.font = 'bold 36px Arial';
ย ย ย ย ย ย ctx.textAlign = 'center';
ย ย ย ย ย ย ctx.fillText('Si yo fuera Alcalde invertirรญa 195 mil millones en:', 600, 70);
ย ย ย ย ย ยย
ย ย ย ย ย ย ctx.fillStyle = '#FCD700';
ย ย ย ย ย ย ctx.font = '20px Arial';
ย ย ย ย ย ย ctx.fillText('Esta es mi propuesta de distribuciรณn presupuestal', 600, 100);
ย ย ย ย ย ยย
ย ย ย ย ย ย const startY = 150;
ย ย ย ย ย ย const barHeight = 45;
ย ย ย ย ย ย const maxBarWidth = 650;
ย ย ย ย ย ย const startX = 280;
ย ย ย ย ย ยย
ย ย ย ย ย ย const categoriasOrdenadas = [...categorias]
ย ย ย ย ย ย ย ย .sort((a, b) => distribucion[b.id] - distribucion[a.id])
ย ย ย ย ย ย ย ย .filter(cat => distribucion[cat.id] > 0);
ย ย ย ย ย ยย
ย ย ย ย ย ย categoriasOrdenadas.forEach((cat, index) => {
ย ย ย ย ย ย ย ย const y = startY + (index * (barHeight + 8));
ย ย ย ย ย ย ย ย const valor = distribucion[cat.id];
ย ย ย ย ย ย ย ย const porcentaje = (valor / PRESUPUESTO_TOTAL) * 100;
ย ย ย ย ย ย ย ย const barWidth = (porcentaje / 100) * maxBarWidth;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ctx.font = '20px Arial';
ย ย ย ย ย ย ย ย ctx.fillStyle = '#333333';
ย ย ย ย ย ย ย ย ctx.textAlign = 'right';
ย ย ย ย ย ย ย ย ctx.fillText(`${cat.emoji} ${cat.nombre}`, startX - 15, y + 28);
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ctx.fillStyle = '#E5E7EB';
ย ย ย ย ย ย ย ย ctx.fillRect(startX, y, maxBarWidth, barHeight);
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ctx.fillStyle = cat.color;
ย ย ย ย ย ย ย ย ctx.fillRect(startX, y, barWidth, barHeight);
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย if (porcentaje > 5) {
ย ย ย ย ย ย ย ย ย ย ctx.fillStyle = '#FFFFFF';
ย ย ย ย ย ย ย ย ย ย ctx.font = 'bold 16px Arial';
ย ย ย ย ย ย ย ย ย ย ctx.textAlign = 'center';
ย ย ย ย ย ย ย ย ย ย ctx.fillText(`${porcentaje.toFixed(1)}%`, startX + barWidth/2, y + 28);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ctx.fillStyle = '#333333';
ย ย ย ย ย ย ย ย ctx.font = 'bold 18px Arial';
ย ย ย ย ย ย ย ย ctx.textAlign = 'left';
ย ย ย ย ย ย ย ย ctx.fillText(`${formatearMiles(valor)}M`, startX + maxBarWidth + 15, y + 28);
ย ย ย ย ย ย });
ย ย ย ย ย ยย
ย ย ย ย ย ย ctx.fillStyle = '#7010A6';
ย ย ย ย ย ย ctx.font = 'bold 22px Arial';
ย ย ย ย ย ย ctx.textAlign = 'center';
ย ย ย ย ย ย ctx.fillText('Para mรญ, mientras hayan 313.257 personas en pobreza,', 600, 540);
ย ย ย ย ย ย ctx.fillText('el "mar" NO es una prioridad ni hace que a Medellรญn no le falte nada', 600, 570);
ย ย ย ย ย ยย
ย ย ย ย ย ย ctx.fillStyle = '#FCD700';
ย ย ย ย ย ย ctx.font = 'bold 18px Arial';
ย ย ย ย ย ย ctx.fillText('#MedellรญnDecide #PresupuestoParticipativo', 600, 600);
ย ย ย ย ย ยย
ย ย ย ย ย ย imageUrl = canvas.toDataURL('image/png');
ย ย ย ย ย ย document.getElementById('imagen-preview').src = imageUrl;
ย ย ย ย ย ย document.getElementById('compartir-container').classList.remove('hidden');
ย ย ย ย ย ย document.getElementById('compartir-container').scrollIntoView({ behavior: 'smooth' });
ย ย ย ย ย ย actualizarConImagen();
ย ย ย ย }

ย ย ย ย function descargarImagen() {
ย ย ย ย ย ย const link = document.createElement('a');
ย ย ย ย ย ย link.download = 'mi-presupuesto-medellin.png';
ย ย ย ย ย ย link.href = imageUrl;
ย ย ย ย ย ย link.click();
ย ย ย ย }

ย ย ย ย // En compartirEnRedes(), modificar:
ย ย ย ย function compartirEnRedes(red) {
ย ย ย ย ย ย const mensaje = encodeURIComponent('El Alcalde gastarรก 195 mil millones en "mar" mientras 313,257 personas viven en pobreza. Yo invertirรญa diferente. ยฟY tรบ? Haz tu propuesta ciudadana #MedellรญnDecide #NoMรกsCaprichos');
ย ย ย ย ย ย const url = encodeURIComponent(window.location.href);
ย ย ย ย ย ยย
ย ย ย ย ย ย const urls = {
ย ย ย ย ย ย ย ย twitter: `https://twitter.com/intent/tweet?text=${mensaje}&url=${url}`,
ย ย ย ย ย ย ย ย facebook: `https://www.facebook.com/sharer/sharer.php?u=${url}`,
ย ย ย ย ย ย ย ย whatsapp: `https://wa.me/?text=${mensaje}%20${url}`
ย ย ย ย ย ย };
ย ย ย ย ย ยย
ย ย ย ย ย ย window.open(urls[red], '_blank');
ย ย ย ย ย ย actualizarConCompartir(red); // CAMBIAR esta lรญnea
ย ย ย ย }

ย ย ย ย function detectarNavegador() {
ย ย ย ย ย ย const agent = navigator.userAgent;
ย ย ย ย ย ย if (agent.indexOf('Chrome') > -1) return 'Chrome';
ย ย ย ย ย ย if (agent.indexOf('Safari') > -1) return 'Safari';
ย ย ย ย ย ย if (agent.indexOf('Firefox') > -1) return 'Firefox';
ย ย ย ย ย ย return 'Otro';
ย ย ย ย }

ย ย ย ย function inicializarSliders() {
ย ย ย ย ย ย const container = document.getElementById('sliders-container');
ย ย ย ย ย ยย
ย ย ย ย ย ย categorias.forEach(cat => {
ย ย ย ย ย ย ย ย const sliderDiv = document.createElement('div');
ย ย ย ย ย ย ย ย sliderDiv.className = 'bg-white p-5 rounded-xl shadow-sm';
ย ย ย ย ย ย ย ย sliderDiv.style.background = `rgba(${cat.color === '#7010A6' ? '112, 16, 166' : '252, 215, 0'}, 0.05)`;
ย ย ย ย ย ย ย ย sliderDiv.innerHTML = `
ย ย ย ย ย ย ย ย ย ย <div class="mb-4">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="flex items-center justify-between mb-3">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="flex items-center gap-3">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="text-3xl">${cat.emoji}</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="font-bold text-gray-800">${cat.nombre}</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="text-xs text-gray-500">Incrementos de $1,000M</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="flex items-center justify-between text-sm mb-3">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span id="porcentaje-${cat.id}" class="text-gray-600 font-medium">0%</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span id="valor-${cat.id}" class="font-bold" style="color: ${cat.color};">$0M</span>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย <input
ย ย ย ย ย ย ย ย ย ย ย ย ย ย type="range"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย id="slider-${cat.id}"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย min="0"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย max="${PRESUPUESTO_TOTAL}"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย step="1000"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย value="0"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย onchange="handleSliderChange('${cat.id}', this.value)"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย oninput="handleSliderChange('${cat.id}', this.value)"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย class="slider w-full"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย style="background: linear-gradient(to right, ${cat.color} 0%, ${cat.color} 0%, #e5e7eb 0%, #e5e7eb 100%)"
ย ย ย ย ย ย ย ย ย ย ย ย />
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย `;
ย ย ย ย ย ย ย ย container.appendChild(sliderDiv);
ย ย ย ย ย ย });
ย ย ย ย }

ย ย ย ย document.addEventListener('DOMContentLoaded', function() {
ย ย ย ย ย ย inicializarSliders();
ย ย ย ย ย ย actualizarContador();
ย ย ย ย ย ยย
ย ย ย ย ย ย const ideasTextarea = document.getElementById('ideas');
ย ย ย ย ย ย const contadorCaracteres = document.getElementById('contador-caracteres');
ย ย ย ย ย ยย
ย ย ย ย ย ย if (ideasTextarea && contadorCaracteres) {
ย ย ย ย ย ย ย ย ideasTextarea.addEventListener('input', function() {
ย ย ย ย ย ย ย ย ย ย contadorCaracteres.textContent = this.value.length;
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย const formulario = document.getElementById('formulario-contacto');
ย ย ย ย ย ย if (formulario) {
ย ย ย ย ย ย ย ย // En el event listener del formulario, cambiar:
ย ย ย ย ย ย ย ย formulario.addEventListener('submit', async function(e) {
ย ย ย ย ย ย ย ย ย ย e.preventDefault();
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย const btnEnviar = document.getElementById('btn-enviar');
ย ย ย ย ย ย ย ย ย ย const mensajeEnviando = document.getElementById('mensaje-enviando');
ย ย ย ย ย ย ย ย ย ย const mensajeExito = document.getElementById('mensaje-exito');
ย ย ย ย ย ย ย ย ย ย const mensajeError = document.getElementById('mensaje-error');
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย btnEnviar.style.display = 'none';
ย ย ย ย ย ย ย ย ย ย mensajeEnviando.classList.remove('hidden');
ย ย ย ย ย ย ย ย ย ย mensajeExito.classList.add('hidden');
ย ย ย ย ย ย ย ย ย ย mensajeError.classList.add('hidden');
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย ย ย ย ย const exitoso = await enviarFormularioCompleto(); // CAMBIAR esta lรญnea
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย if (exitoso) {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย mensajeEnviando.classList.add('hidden');
ย ย ย ย ย ย ย ย ย ย ย ย ย ย mensajeExito.classList.remove('hidden');
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย formulario.reset();
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย btnEnviar.style.display = 'inline-block';
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย mensajeExito.classList.add('hidden');
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย document.getElementById('contador-caracteres').textContent = '0';
ย ย ย ย ย ย ย ย ย ย ย ย ย ย }, 3000);
ย ย ย ย ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย throw new Error('Error en el envรญo');
ย ย ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย ย ย ย ย console.error('Error:', error);
ย ย ย ย ย ย ย ย ย ย ย ย mensajeEnviando.classList.add('hidden');
ย ย ย ย ย ย ย ย ย ย ย ย mensajeError.classList.remove('hidden');
ย ย ย ย ย ย ย ย ย ย ย ย btnEnviar.style.display = 'inline-block';
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย mensajeError.classList.add('hidden');
ย ย ย ย ย ย ย ย ย ย ย ย }, 5000);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }
ย ย ย ย });
ย ย </script>
</body>
</html>
